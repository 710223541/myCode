<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style type="text/css">
*{margin:0;padding:0;}
#div1,#div2{width:100px;height:100px;position:absolute;}
#div1{background:red;}
#div2{background:green;left:100px;}
</style>
</head>

<body>
<div id="div1"></div>
<div id="div2"></div>

<script type="text/javascript">
window.onload = function()
{
	var d1 = new Drag("div1");	
}
function Drag(id)
{
	this.obj = document.getElementById(id);
	this.disX = 0;
	this.disY = 0;
	this.init();
}
Drag.prototype.init = function()
{
	var _this = this;
	
	this.obj.onmousedown = function(ev)
	{
		var ev = ev || window.event;
		_this.fnDown(ev);
		
		document.onmousemove = function(ev)
		{
			var ev = ev || window.event;
			_this.fnMove(ev);	
		}	
		document.onmouseup = function()
		{
			_this.fnUp();
		}
		return false;	
	}
}

Drag.prototype.fnDown = function(ev)
{
	this.disX = event.clientX - this.obj.offsetLeft;
	this.disY = event.clientY - this.obj.offsetTop;	
	console.log(this.disX+"-"+this.disY);		
}

Drag.prototype.fnMove = function()
{
	this.obj.style.left = event.clientX - this.disX + "px";	
	this.obj.style.top = event.clientY - this.disY + "px";
}

Drag.prototype.fnUp = function()
{
	document.onmousemove = null;
	document.onmouseup = null;	
}

</script>
</body>
</html>
