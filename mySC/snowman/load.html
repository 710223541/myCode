<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>loading</title>
<style type="text/css">
*{margin:0;padding:0;}
@-webkit-keyframes rotate
{
	0%{-webkit-transform:rotate(0deg);}
	100%{-webkit-transform:rotate(-360deg);}	
}
@-webkit-keyframes rotate2
{
	0%{-webkit-transform:rotate(0deg);}	
	100%{-webkit-transform:rotate(-360deg);}	
}
@-webkit-keyframes rotate3
{
	0%{-webkit-transform:translateY(0px);}	
	100%{-webkit-transform:translateY(7px);}	
}
@-webkit-keyframes shodow
{
	0%{-webkit-transform:scale(0.8);opacity:0.5;}
	100%{-webkit-transform:scale(1);opacity:1;}	
}

#load{width:120px;height:140px;position:absolute;left:calc(50% - 60px);top:calc(50% - 70px);}
.pic{width:120px;height:100px;background:url(images/loding/loading3.png) no-repeat;position:absolute;-webkit-animation:rotate3 0.6s infinite alternate linear;}
#pic2{width:120px;height:100px;background:url(images/loding/loading4.png) no-repeat;position:absolute;-webkit-animation:rotate 0.6s infinite linear;}
#pic3{width:120px;height:100px;background:url(images/loding/loading5.png) no-repeat;position:absolute;-webkit-animation:rotate2 0.6s infinite linear;}
#load_text{width:120px;height:100px;font:18px/100px Arial, Helvetica, sans-serif;text-align:center;color:#f39;position:absolute;}
.loadBg{width:100px;height:40px;position:absolute;bottom:0px;left:10px;background:-webkit-radial-gradient(contain,rgba(0,0,0,0.3),rgba(0,0,0,0));-webkit-animation:shodow 1s infinite alternate linear;}
</style>   
</head>
<body>
<div id="load">
	<div class="pic" id="pic1">
    	<div id="pic2"></div>
        <div id="pic3"></div>
        <div id="load_text">0%</div>
    </div>
	<div class="loadBg" id="shadow"></div>
</div>

<script type="text/javascript">
(function(){
	var load_txt = document.getElementById('load_text');
	var aPic1 = document.getElementById('pic1');
	var aPic2 = document.getElementById('pic2');
	var aPic3 = document.getElementById('pic3');
	var aShadow = document.getElementById('shadow');
	var iNum = 0;
	var aPic =
	[
		'http://pic18.nipic.com/20111205/5252423_200737183000_2.jpg',
		'http://pic18.nipic.com/20111205/5252423_190315292000_2.jpg',
		'http://pic18.nipic.com/20111207/5252423_203544285000_2.jpg',
		'http://pic20.nipic.com/20120331/9733570_18184322514_2.jpg',
		'http://pic18.nipic.com/20111207/5252423_201705206000_2.jpg'
	];
	
	for(var i=0;i<aPic.length;i++)
	{
		var oImg = new Image();
		oImg.src = aPic[i];
		oImg.index = i;
		oImg.onload = function()
		{
			iNum++;
			load_txt.innerHTML = iNum/aPic.length*100+'%';
			if(iNum == aPic.length)
			{
				aPic1.style.WebkitAnimationPlayState = 'paused';
				aPic2.style.WebkitAnimationPlayState = 'paused';
				aPic3.style.WebkitAnimationPlayState = 'paused';
				aShadow.style.WebkitAnimationPlayState = 'paused';
			}
		}
		
		oImg.onerror = function()
		{
			iNum++;
			//alert(this.index);
			load_txt.innerHTML = iNum/aPic.length*100+'%';
			if(iNum == aPic.length)
			{
				aPic1.style.WebkitAnimationPlayState = 'paused';
				aPic2.style.WebkitAnimationPlayState = 'paused';
				aPic3.style.WebkitAnimationPlayState = 'paused';
				aShadow.style.WebkitAnimationPlayState = 'paused';
			}
		}		
	}
		
})()
</script>
</body>
</html>