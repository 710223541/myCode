<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>三角函数实例</title>
<style type="text/css">
*{margin:0;padding:0;}
#div1{width:400px;background:url(img/img1.jpg) no-repeat;height:500px;margin:0 auto;background-size:100% 100%;margin-top:80px;position:relative;}
#div2{width:10px;height:10px;background:#000;position:absolute;left:185px;top:48px;border-radius:50%;}
#div3{width:10px;height:10px;background:#000;position:absolute;left:252px;top:48px;border-radius:50%;}
</style>
</head>

<body>
<div id="div1">
	<div id="div2"></div>
	<div id="div3"></div>
</div>
<script type="text/javascript">
window.onload = function()
{
	var oDiv2 = document.getElementById('div2');
	var oDiv3 = document.getElementById('div3');
	
	document.onmousemove = function(ev)
	{
		var ev = ev || window.event;
		var r = 20;
		var L1 = 185;
		var T1 = 48;
		var L2 = 252;
		var T2 = 48;
		change(oDiv2,ev.clientX,ev.clientY,L1,T1);
		change(oDiv3,ev.clientX,ev.clientY,L2,T2);
		function change(obj,x,y,l,t)
		{
			var changeX = 0;
			var changeY = 0;
			var b = Math.abs(x - (obj.offsetLeft + obj.parentNode.offsetLeft));
			var a = Math.abs(y - (obj.offsetTop + obj.parentNode.offsetTop));
			
			//右上
			if(x > obj.offsetLeft + obj.parentNode.offsetLeft && y < obj.offsetTop + obj.parentNode.offsetTop)
			{
				changeX = Math.sin(Math.atan(b/a)) * r;
				changeY = Math.cos(Math.atan(b/a)) * -r;	
				
			}else if(x > obj.offsetLeft + obj.parentNode.offsetLeft && y > obj.offsetTop + obj.parentNode.offsetTop)//右下
			{
				changeX = Math.sin(Math.atan(b/a)) * r;
				changeY = Math.cos(Math.atan(b/a)) * r;	
					
			}else if(x < obj.offsetLeft + obj.parentNode.offsetLeft && y > obj.offsetTop + obj.parentNode.offsetTop) //左下
			{
				changeX = Math.sin(Math.atan(b/a)) * -r;
				changeY = Math.cos(Math.atan(b/a)) * r;	
				
			}else if(x < obj.offsetLeft + obj.parentNode.offsetLeft && y < obj.offsetTop + obj.parentNode.offsetTop) //左上
			{
				changeX = Math.sin(Math.atan(b/a)) * -r;
				changeY = Math.cos(Math.atan(b/a)) * -r;					
			}
			
			obj.style.left = l + changeX + 'px';
			obj.style.top = t + changeY + 'px';
		};	
	}	
}
</script>
</body>
</html>
